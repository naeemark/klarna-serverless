# Welcome to Serverless!

service: klarna-serverless

custom:
  project: 'KlarnaSls'
  stage: ${opt:stage, self:provider.stage}
  settings:
    dev:
      STAGE: ${self:custom.stage}
      ENV: 'develop'    
    prd:
      STAGE: ${self:custom.stage}
      ENV: 'production'      

package:
  individually: true
  exclude:
    - ./**
    
provider:
  name: aws
  runtime: python3.7
  region: ap-southeast-1
  timeout: 30
  environment: ${self:custom.settings.${self:custom.stage}}

functions:
  helloV1:
    handler: src/handler.hello
    name: ${self:custom.project}-${self:custom.stage}-helloV1
    package:
      include:
        - src/**
    tracing: true
    events:
      - http:
          method: get
          path: api/v1/hello
          cors: true

  fibonacciV1:
    handler: src/v1/fibonacci/lambda_function.lambda_handler
    name: ${self:custom.project}-${self:custom.stage}-fibonacciV1
    package:
      include:
        - src/v1/fibonacci/**
    tracing: true
    events:
      - http:
          method: get
          path: api/v1/fibonacci
          cors: true


